# Phase 2 마진 계산 수동 QA 체크리스트

목표: 레버리지 티어/정밀도를 반영한 최소/최대/추가매수 계산과 UI 라벨을 수동 검증합니다.

## 사전 준비
- 개발 서버 실행: `npm run dev` → `http://localhost:3000`
- 페이지: `/trading/automation`
- 마켓/티어 데이터: 실데이터 사용 또는 Mock(고정 티어) 사용 가능

## 검증 시나리오
1) ETHUSDT, 레버리지 150x, USDT 기준 진입금액 입력
- 기대: 최소 주문단위(`minQty`)와 `quantityPrecision` 반영해 수량이 절사/반올림 규칙에 맞게 표기
- 라벨: “거래소 한도” vs “전략 한도”가 둘 중 더 엄격한 값을 표시

2) BTCUSDT, 레버리지 125x, 추가 매수 예산 비율 입력(예: 50%)
- 기대: `calculateScaleInBudget` 산식에 따라 1회 예산이 1000% 상한 내에서 계산
- 표시: 추가 매수 총량과 회당 예산이 분리 표기

3) 티어 미존재/과도 레버리지(예: 500x) 입력
- 기대: 검증 실패 → 섹션 에러 토스트 + 필드 하이라이트/포커스 이동
- 코드: `VALIDATION_ERROR`, `fieldErrors`에 `leverage` 포함

4) 최소 노미널 미달 입력
- 기대: 최소 주문 금액(또는 수량) 안내 배지/메시지 노출, 저장 불가

## 수용 기준(AC)
- 계산 결과가 표시 정밀도와 최소단위를 준수한다
- 에러는 표준 포맷(JSON)으로 수신되며 UI가 필드별로 반영한다
- 한도 라벨은 거래소/전략 중 더 작은 값을 기준으로 표시한다

## 참고
- 유틸: `src/lib/trading/margin.ts`(계산), `src/lib/trading/adapters/binanceLeverage.ts`(티어)
- 이슈 발견 시: 실제 값(입력/표시/기대) 스냅샷과 requestId를 포함하여 이슈 등록

